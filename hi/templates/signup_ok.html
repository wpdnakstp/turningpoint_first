<!DOCTYPE html>
{% load staticfiles %}
{%if error %}
 <script>
     alert("{{error}}")
 </script>
{% endif %}
<html lang="en">

<head>
    <!-- Required meta tags-->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="Colorlib Templates">
    <meta name="author" content="Colorlib">
    <meta name="keywords" content="Colorlib Templates">
  
    <!-- Title Page-->
    <title>회원가입</title>

    <!-- Font special for pages-->
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i,800,800i" rel="stylesheet">

    <!-- Main CSS-->
    <link href="{% static '/css/signup.css' %}" rel="stylesheet" media="all">
</head>
<script src="//code.jquery.com/jquery-3.3.1.min.js"></script>
<script>
        function checkid(){
            var userid = document.getElementById("uid").value;
            var testid = $('#uid').val();
            $.ajax({
                url: "{% url 'id_overlap_check' %}",
                data: {
                    'username': userid
                },
                datatype: 'json',
                success: function(data) {
                    console.log(data['overlap']);
                    if(data['overlap']=="fail"){
                        alert("이미 존재하는 아이디 입니다.");
                        userid.focus();
                        return;
                    } else {
                        alert("사용가능한 아이디 입니다.");
                        return;
                    }
                }
            });            
        }

        function checkmail(){
            var usermail = $('#userEmail').val();
            $.ajax({
                url: "{% url 'mailOverlapCheck' %}",
                data: {
                    'usermail': usermail
                },
                datatype: 'json',
                success: function(data){
                    console.log(data['overlap']);
                    if(data['overlap']=="fail"){
                        alert("이미 존재하는 이메일 입니다.");
                        usermail.focus();
                        return;
                    } else {
                        alert("사용가능한 이메일 입니다.");
                        return;
                    }
                }
            });
        }

        function checknick(){
            var userNick = $('#nickName').val();
            $.ajax({
                url: "{% url 'nickOverlapCheck' %}",
                data: {
                    'nickName': userNick
                },
                datatype: 'json',
                success: function(data){
                    console.log(data['overlap']);
                    if(data['overlap']=="fail"){
                        alert("이미 존재하는 닉네임 입니다.");
                        userNick.focus();
                        return;
                    } else {
                        alert("사용가능한 닉네임 입니다.");
                        return;
                    }
                }
            });
        }
</script>

<body>
    <div class="page-wrapper bg-dark p-t-100 p-b-50">
        <div class="wrapper wrapper--w900">
            <div class="card card-6">
                <div class="card-heading">
                    <h2 class="title">터닝포인트</h2>
                </div>
                <div class="card-body">
                    <form method="POST" action = "{%url 'signup_ok' %}" >
                            {% csrf_token %} <!--사이트간 위조 방지 토큰을 넣어주고-->
                        <div class="form-row">
                            <div class="name">아이디</div>
                            <div class="value">
                                <input class="input--style-6" type="text" id="uid" name="username"style="width: 60%;">
                                <input class="input--style-6" id="validationId" type="button" value="중복검사" style="width: 30%; " onclick="checkid();" />
                                <input type="hidden" value="0" name="chs" />
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="name">비밀번호</div>
                            <div class="value">
                                <input class="input--style-6" type="password" name="password1">
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="name">비밀번호 재확인</div>
                            <div class="value">
                                <input class="input--style-6" type="password" name="password2">
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="name">이름</div>
                            <div class="value">
                                <input class="input--style-6" type="text" name="full_name">
                            </div>
                        </div>
                       
                        <div class="form-row">
                            <div class="name">생년월일</div>
                            <div class="value">
                                <select class="input--style-6" type="number" name="birth_year" placeholder="년" style="height: 39px; width:30%; border-radius: 0;">
                                    <option>년</option>
                             {% for i in year %}
                                    <option>{{i}}</option>
                             {%endfor%}
                                </select>
                      <select class="input--style-6" type="number" name="birth_mon" style="height: 39px; width:30%; border-radius: 0;">
                


                    <option>월</option>
        
        
                    <option>01</option>
        
        
                    <option>02</option>
        
        
                    <option>03</option>
        
        
                    <option>04</option>
        
        
                    <option>05</option>
        
        
                    <option>06</option>
        
        
                    <option>07</option>
        
        
                    <option>08</option>
        
        
                    <option>09</option>
        
        
                    <option>10</option>
        
        
                    <option>11</option>
        
        
                    <option>12</option>
                     </select>
                     
                     <select class="input--style-6" type="number" name="birth_day" style="height: 39px; width:30%; border-radius: 0;">
                


                            <option>일</option>
                            <option>01</option>
                            <option>02</option>
                            <option>03</option>
                            <option>04</option>
                            <option>05</option>
                            <option>06</option>
                            <option>07</option>
                            <option>08</option>
                            <option>09</option>
                            <option>10</option>
                            <option>11</option>
                            <option>12</option>
                            <option>13</option>
                            <option>14</option>
                            <option>15</option>
                            <option>16</option>
                            <option>17</option>
                            <option>18</option>
                            <option>19</option>
                            <option>20</option>
                            <option>21</option>
                            <option>22</option>
                            <option>23</option>
                            <option>24</option>
                            <option>25</option>
                            <option>26</option>
                            <option>27</option>
                            <option>28</option>
                            <option>29</option>
                            <option>30</option>
                            <option>31</option>
                            </select>
                     
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="name">성별</div>
                            <div class="value">
                        


                            <select class="input--style-6" type="text" name="gender" style="height: 39px; width:30%; border-radius: 0;">
                                    
                            <option>남자</option>
                            <option>여자</option>
                            </select>
                        </div>
                    </div>
                        <div class="form-row">
                            <div class="name">닉네임</div>
                            <div class="value">
                                <input class="input--style-6" type="text" id = "nickName" name="nickName" style="width: 60%;">
                                <input class="input--style-6" type="button" value="중복검사" id="uid1" style="width: 30%;" onclick="return checknick();" />

                            </div>
                        </div>
                        <div class="form-row">
                            <div class="name">이메일</div>
                            <div class="value">
                                <div class="input-group">
                                    <input class="input--style-6" id="userEmail" type="email" name="email" placeholder="example@email.com" style="width: 60%;">
                                    <input class="input--style-6" type="button" value="중복검사"  id="uid2"style="width: 30%; " onclick="return checkmail();" />

                                </div>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="name">휴대전화</div>
                            <div class="value">
                                <input class="input--style-6" type="text" name="phoneFirst"value="" size="4" maxlength="3" autocomplete="off"style="width:28%; padding: 0 10px;"> -
                                <input class="input--style-6" type="text" name="phoneMiddle"value="" size="4" maxlength="4" autocomplete="off"style="width:28%; padding: 0 10px;"> -
                                <input class="input--style-6" type="text" name="phoneLast"value="" size="4" maxlength="4" autocomplete="off"style="width:28%; padding: 0 10px;">

                            </div>
                        </div>
                        <div class="form-row">
                            <div class="name">군종</div>
                            <div class="value">

                                    <select class="input--style-6" type="number" name="userArmy" style="height: 39px; width:30%; border-radius: 0;">
                


                                            <option>육군</option>
                                
                                
                                            <option>해군</option>
                                
                                
                                            <option>공군</option>
                                
                                
                                            <option>해병대</option>
                                
                                
                                            <option>의경</option>
                                
                                
                                            <option>해경</option>
                                
                                
                                            <option>소방원</option>
                                
                                
                                            <option>공익</option>
                                
                            
                                             </select>                            </div>
                        </div>
 
                        <div class="form-row">
                            <div class="name">프로필 사진</div>
                            <div class="value">
                                <div class="input-group js-input-file">
                                    <input class="input-file" type="file" name="file_cv" id="file">
                                    <label class="label--file" for="file">Choose file</label>
                                    <span class="input-file__info">No file chosen</span>
                                </div>
                                <div class="label--desc">Upload your CV/Resume or any other relevant file. Max file size 50 MB</div>
                            </div>
                        </div>
                    
                </div>
                <div class="card-footer">
                    <button class="btn btn--radius-2 btn--blue-2" type="submit">회원가입</button>
                </div>
            </div>
        </div>
    </div>
</form>
    <!-- Jquery JS-->
    <script src="vendor/jquery/jquery.min.js"></script>


    <!-- Main JS-->
    <script src="{% static 'js/signup_ok.js' %}"></script>

</body><!-- This templates was made by Colorlib (https://colorlib.com) -->

</html>
<!-- end document-->